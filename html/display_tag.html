<!DOCTYPE html>
<html>
<head>
<!--link rel="stylesheet" type="text/css" href="mystyle.css"-->
 <style type="text/css">
  /* Just some nice colors */
  body {background: #FFF; color: #FFF; font-size: large;
    text-shadow: white 0.2em 0.2em 0.2em}
  a:link, a:visited {color: inherit; text-decoration: underline}
  a:hover {text-shadow: white 0 0 0.2em}

  /* Vertical centering: make div as large as viewport and use table layout */
  div.container {top: 0; left: 0; width: 100%; height: 100%;
    position: absolute; display: table}
  p {display: table-cell; vertical-align: middle}

  /* Horizontal centering of image: set left & right margins to 'auto' */
  img.displayed {display: block; margin: 1em auto}

  /* Also center the lines in the paragraph */
  p {text-align: center}

  body, html {height: 100%; margin: 0; padding: 0}

  /* Keep the translations off to the side */
  #language {display: none}
  #translations {position: absolute; top: 0; right: 0; color: white;
    text-shadow: none; margin: 0.5em; font-size: small;
    background: #474; border-radius: 1em; padding: 0 0.5em}
  #translations h2, #translations p, #translations a {display: block;
    text-align: center; font-size: 100%}
  </style>
<meta charset="utf-8" />

<script type="text/javascript" src="http://cdn.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<script type="text/javascript" src="http://cdn.robotwebtools.org/roslibjs/current/roslib.min.js"></script>

<script type="text/javascript" type="text/javascript">
  // Connecting to ROS
  // -----------------

  var ros = new ROSLIB.Ros();
  ros.connect('ws://localhost:9090');

  // Publishing a Topic
  // ------------------

 /* var testMsg = new ROSLIB.Topic({
    ros : ros,
    name : '/test',
    messageType : 'std_msgs/String'
  });

  var ack = new ROSLIB.Topic({
    ros : ros,
    name : '/test_ack',
    messageType : 'std_msgs/String'
  });
*/
  var acknowledge = new ROSLIB.Topic({
    ros : ros,
    name : '/new_tag_ack',
    messageType : 'ftag2test/DisplayTag'
  });
  
  var listener = new ROSLIB.Topic({
    ros : ros,
    name : '/new_tag',
    messageType : 'ftag2test/DisplayTag'
  });

  var path = "/home/dacocp/Dropbox/ftag2/ml_tag_displayer/images/";

  function Slideshow(file_name, size, rot){
    document.getElementById("img").width = size;
    document.getElementById("img").height = size;
    document.getElementById("img").src=path+file_name;
    document.getElementById("img").style.MozTransform = "rotate(" + rot + "deg)";                      
    document.getElementById("img").style.webkitTransform = "rotate(" + rot + "deg)";
    //imgToMiddle("img");
  }


  listener.subscribe(function(message) {
    console.log('Received message on ' + listener.name + ': ' + "Filename: " + message.filename + "\t Rotation: " + message.rotation);
    //console.log('Filename ' + displaytag.filename);
    acknowledge.publish(message);
    Slideshow(message.filename,600,message.rotation);
  });

</script>

</head>

<body>

<div class="container">
   <p >This is vertically &amp; horizontally centered. <img id="img" alt="[image of a sheep]" class="displayed" src="/home/dacocp/image1.jpg"> 
  </p></div>

</body>
</html>
